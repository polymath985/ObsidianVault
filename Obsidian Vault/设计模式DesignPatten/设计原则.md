---
tags:
  - 设计原则
---
## 单一职责原则

- 一个类只负责一个功能领域中的相应职责

在下面给出的画图工具类中，其只承担描边和画图的职能，而不去管到底`shape`究竟是什么。这样使得画图工具在外界图形种类或者数量发生变化时不受任何干扰，达到单一职责的目的。

![[Pasted image 20250428192424.png]]
*图：画图工具类*

![[Pasted image 20250428192859.png]]
*图：没有遵循单一职责原则的代码*

## 依赖倒置原则

- 高层模块不应该依赖于底层模块，二者都应该依赖于抽象
- 抽象不应该依赖于细节，细节应当依赖于抽象
- 换言之，要面向接口(抽象类)编程，而不是面向实现编程

在下面这个例子中，高层模块(调用者模块)`Graphics`依赖低层模块(被调用者模块)`Rectangle`和`Circle`，这导致底层模块在发生变动时高层模块必须进行修改，不符合低耦合和高复用性的要求

![[Pasted image 20250428193630.png]]*图：高层模块依赖于底层模块*

下面这张图片中，高层模块取消了对底层模块的直接以来，转而通过抽象类进行，这样无论`Shape`实现的子类如何改变，都不会影响上层`Graphics`的调用

![[Pasted image 20250428192424.png]]
*图：依赖于抽象*

## 开放封闭原则

- 一个软件实体应该对外扩展开放，对内修改关闭，即软件实体应在尽量不修改原有代码的情况下进行扩展

在下面这个例子中，如果添加应该`Triangle`类型，会导致必须对方法进行修改，增加判断条件，这样就增加了代码的耦合度，违背了开放封闭原则和单一职责原则

![[Pasted image 20250428192859.png]]
*图：必须进行内部修改*

在下面这张图片中，对功能的实现依赖于注入，从而避免了修改函数内部

![[Pasted image 20250428192424.png]]
*图：注入解耦*

## 接口隔离原则

- 使用多个专门的接口，而不使用单一的总接口

## 里氏替换原则

- 所有基类出现的地方都必能被子类替换，且功能不受到影响 

## 合成复用原则

- 尽量使用对象组合/聚合，而不是通过继承来达到复用的目的

在下面这张图片中，将外部的`Shape`通过传参形式传入，来实现聚合的目的

![[Pasted image 20250503144648.png]]

在这张图中，类型已经写入父类之中，通过各个组件实现组合的效果

![[Pasted image 20250503144737.png]]
## 迪米特原则

- 也叫最小知识原则，一个软件实体应当尽可能减少与其他实体发生相互作用。类与类的耦合度应该尽可能的低

即尽量至于类内部字段互动，或者与注入的信息互动

![[Pasted image 20250503145217.png]]

这样做会导致类访问外部的实例，而非自身的字段，导致耦合度增大

> [!NOTE]
> 开闭原则是目标，里氏替换原则是基础，依赖倒置原则是手段
> 最终将不稳定抛到最外层，从而简化代码修改

# 核心思想

- 隔离变化
- 针对接口编程，而不是针对实现编程